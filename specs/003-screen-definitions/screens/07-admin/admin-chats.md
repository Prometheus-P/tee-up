# Screen: Admin Chats (채팅 관리)

**Route**: `/admin/chats`
**Status**: Implemented (Limited)
**Last Updated**: 2025-12-18
**Priority**: P3
**Dependencies**: Admin Auth, Chat System

---

## 1. 화면 개요

### 목적
플랫폼 내 채팅을 모니터링하고 신고된 채팅을 관리한다.

> **Note**: 채팅 기능은 현재 아카이브 상태입니다. 이 페이지는 기존 채팅 데이터 관리와 신고 처리를 위해 유지됩니다.

### 사용자 흐름
```
/admin → /admin/chats → 신고된 채팅 검토 → 조치
```

### 접근 조건
- **인증 필요**: Yes
- **권한 수준**: admin
- **전제 조건**: 관리자 로그인 완료

---

## 2. 레이아웃 구조

```
┌────────────────────────────────────────────────────────────────────────────┐
│ Admin Header                              [관리자: admin@teeup.kr] [로그아웃]│
├────────────────────────────────────────────────────────────────────────────┤
│ [대시보드] [프로 관리] [사용자 관리] [채팅 관리] [분석]     ← Admin Nav      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  채팅 관리                                                                  │
│                                                                            │
│  [전체 채팅] [신고된 채팅]                               ← Tabs             │
│                                                                            │
│  신고된 채팅 (5건)                                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │ 신고자      │ 피신고자  │ 신고 사유      │ 신고일      │ 상태   │ 액션 │ │
│  ├─────────────┼───────────┼────────────────┼─────────────┼────────┼──────┤ │
│  │ 김철수      │ 이프로    │ 욕설/비방      │ 2024-01-15 │ 대기   │ [검토]│ │
│  │ 박영희      │ 최프로    │ 스팸          │ 2024-01-14 │ 대기   │ [검토]│ │
│  │ ...        │           │               │             │        │      │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│  ⚠️ 채팅 기능은 현재 비활성화 상태입니다.                                     │
│  기존 신고 건만 처리 가능합니다.                                              │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 주요 컴포넌트

### 3.1 ChatTabs

**탭 네비게이션**

| Tab | Description |
|-----|-------------|
| 전체 채팅 | 모든 채팅방 목록 |
| 신고된 채팅 | 신고 접수된 채팅 |

### 3.2 ReportedChatsTable

**신고 테이블**

| Column | Description |
|--------|-------------|
| 신고자 | 신고한 사용자 |
| 피신고자 | 신고당한 사용자 |
| 신고 사유 | 욕설/비방, 스팸, 사기, 기타 |
| 신고일 | 신고 접수 일시 |
| 상태 | 대기/처리중/완료 |
| 액션 | 검토 버튼 |

### 3.3 ReportReviewModal

**신고 검토 모달**

```
┌─────────────────────────────────────────────┐
│  신고 검토                            [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  신고 정보                                   │
│  신고자: 김철수                              │
│  피신고자: 이프로                            │
│  사유: 욕설/비방                             │
│  상세: "레슨 문의 중 욕설을 했습니다"         │
│                                             │
│  ─────────────────────────────────────────  │
│                                             │
│  채팅 내용 미리보기                           │
│  ┌───────────────────────────────────────┐  │
│  │ [채팅 메시지들...]                     │  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  조치 선택                                   │
│  ○ 경고                                     │
│  ○ 일시 정지 (7일)                          │
│  ○ 영구 정지                                │
│  ○ 신고 기각                                │
│                                             │
│           [취소] [조치 적용]                  │
└─────────────────────────────────────────────┘
```

### 3.4 ArchiveNotice

**아카이브 안내**

| Element | Description |
|---------|-------------|
| 아이콘 | ⚠️ 경고 |
| 메시지 | 채팅 기능 비활성화 안내 |
| 스타일 | `--tee-warning` 배경 |

---

## 4. 데이터 요구사항

### Server Actions

| Action | 설명 |
|--------|------|
| `getReportedChats` | 신고된 채팅 목록 |
| `getChatMessages` | 채팅 메시지 조회 |
| `processReport` | 신고 처리 (경고/정지/기각) |

### 데이터 스키마

```typescript
interface ChatReport {
  id: string;
  reporter_id: string;
  reporter_name: string;
  reported_id: string;
  reported_name: string;
  reason: 'abuse' | 'spam' | 'fraud' | 'other';
  description: string;
  chat_id: string;
  status: 'pending' | 'processing' | 'resolved';
  created_at: string;
}
```

---

## 5. 인터랙션 정의

### 5.1 신고 처리

1. **Given** 신고 검토 모달이 열려 있을 때
2. **When** 조치를 선택하고 "조치 적용"을 클릭하면
3. **Then** 해당 조치가 적용됨
4. **Then** 신고 상태가 resolved로 변경됨
5. **Then** 필요시 사용자 상태 변경 (정지 등)

---

## 6. 접근성 요구사항

- [ ] 테이블: 헤더에 scope="col"
- [ ] 모달: focus trap, Escape로 닫기
- [ ] 라디오 버튼: 적절한 label

---

## 7. 관련 화면

- **이전 화면**: [Admin Dashboard](./admin-dashboard.md)
- **연관 화면**: [Admin Users](./admin-users.md)
