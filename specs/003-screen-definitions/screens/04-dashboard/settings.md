# Screen: Settings (계정 설정)

**Route**: `/dashboard/settings`
**Status**: Unimplemented
**Last Updated**: 2025-12-18
**Priority**: P1
**Dependencies**: Auth, Dashboard Layout

---

## 1. 화면 개요

### 목적
프로가 프로필 정보, 보안 설정, 알림 설정, 구독 관리를 한 곳에서 관리한다.

### 사용자 흐름
```
/dashboard → /dashboard/settings → 설정 변경 → 저장
```

### 접근 조건
- **인증 필요**: Yes
- **권한 수준**: pro
- **전제 조건**: 프로 프로필 존재

---

## 2. 레이아웃 구조

### 와이어프레임

```
┌────────────────────────────────────────────────────────────────────────────┐
│ Dashboard Header                                    [프로필] [로그아웃]    │
├─────────────────┬──────────────────────────────────────────────────────────┤
│                 │                                                          │
│  Sidebar        │  계정 설정                                                │
│  ────────       │                                                          │
│  □ 대시보드     │  [프로필] [보안] [알림] [구독] [위험 영역]  ← 탭 네비게이션│
│  □ 포트폴리오   │                                                          │
│  □ 리드         │  ┌──────────────────────────────────────────────────────┐│
│  □ 컨시어지     │  │  프로필 정보                                         ││
│  ■ 설정         │  │                                                      ││
│                 │  │  프로필 사진                                         ││
│                 │  │  ┌──────┐                                            ││
│                 │  │  │[📷]  │ [사진 변경]                                 ││
│                 │  │  └──────┘                                            ││
│                 │  │                                                      ││
│                 │  │  이름          [김프로           ]                   ││
│                 │  │  이메일        [pro@example.com ] (변경 불가)        ││
│                 │  │  전화번호      [010-1234-5678   ]                   ││
│                 │  │  슬러그        teeup.kr/[pro-kim] [확인]             ││
│                 │  │                                                      ││
│                 │  │  자기소개                                            ││
│                 │  │  ┌─────────────────────────────────────────────────┐││
│                 │  │  │                                                 │││
│                 │  │  └─────────────────────────────────────────────────┘││
│                 │  │                                                      ││
│                 │  │                                     [변경사항 저장]  ││
│                 │  └──────────────────────────────────────────────────────┘│
│                 │                                                          │
└─────────────────┴──────────────────────────────────────────────────────────┘
```

### 섹션별 탭 내용

#### Tab 1: 프로필

| Field | Type | Editable | Validation |
|-------|------|----------|------------|
| 프로필 사진 | image upload | Yes | max 5MB, jpg/png |
| 이름 | text | Yes | required, max 50 |
| 이메일 | email | No | - |
| 전화번호 | tel | Yes | 한국 전화번호 형식 |
| 슬러그 | text | Yes | unique, lowercase, no spaces |
| 자기소개 | textarea | Yes | max 500자 |

#### Tab 2: 보안

```
┌──────────────────────────────────────────────────────────────┐
│  비밀번호 변경                                                │
│                                                              │
│  현재 비밀번호    [••••••••        ]                          │
│  새 비밀번호      [                ]                          │
│  비밀번호 확인    [                ]                          │
│                                                              │
│                                          [비밀번호 변경]      │
│                                                              │
│  ─────────────────────────────────────────────────────────── │
│                                                              │
│  로그인 기록                                                  │
│  • 2024-01-15 14:30 - 서울, 대한민국 (Chrome)                │
│  • 2024-01-14 09:15 - 서울, 대한민국 (Safari)                │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

#### Tab 3: 알림

```
┌──────────────────────────────────────────────────────────────┐
│  알림 설정                                                    │
│                                                              │
│  이메일 알림                                                  │
│  ☑ 새 리드 알림                     [토글 ON]                 │
│  ☑ 주간 리포트                      [토글 ON]                 │
│  ☐ 마케팅 뉴스레터                  [토글 OFF]                │
│                                                              │
│  푸시 알림                                                    │
│  ☑ 새 리드 즉시 알림                [토글 ON]                 │
│  ☐ 시스템 공지사항                  [토글 OFF]                │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

#### Tab 4: 구독

```
┌──────────────────────────────────────────────────────────────┐
│  현재 요금제                                                  │
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  Free                                      현재 요금제   ││
│  │  월 0원                                                  ││
│  │  • 월 3개 리드 제한                                      ││
│  │  • 기본 포트폴리오 템플릿                                 ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  업그레이드 옵션                                              │
│  ┌──────────────────────┐  ┌──────────────────────┐         │
│  │ Basic               │  │ Pro          ★       │         │
│  │ 월 9,900원          │  │ 월 19,900원          │         │
│  │ • 월 10개 리드      │  │ • 무제한 리드        │         │
│  │ • 모든 템플릿       │  │ • 커스텀 도메인      │         │
│  │ [업그레이드]        │  │ [업그레이드]        │         │
│  └──────────────────────┘  └──────────────────────┘         │
│                                                              │
│  결제 내역                                                    │
│  (결제 내역 없음)                                             │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

#### Tab 5: 위험 영역 (Danger Zone)

```
┌──────────────────────────────────────────────────────────────┐
│  ⚠️ 위험 영역                                                 │
│                                                              │
│  계정 비활성화                                                │
│  프로 포트폴리오가 비공개 처리됩니다.                          │
│  [계정 비활성화]                                              │
│                                                              │
│  ─────────────────────────────────────────────────────────── │
│                                                              │
│  계정 삭제                                                    │
│  모든 데이터가 영구 삭제됩니다. 이 작업은 되돌릴 수 없습니다.    │
│  [계정 삭제]  ← Destructive 버튼                              │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 3. 컴포넌트 목록

### 3.1 SettingsTabs

**탭 네비게이션**

| Tab | Icon | Label |
|-----|------|-------|
| profile | UserIcon | 프로필 |
| security | ShieldCheckIcon | 보안 |
| notifications | BellIcon | 알림 |
| subscription | CreditCardIcon | 구독 |
| danger | ExclamationTriangleIcon | 위험 영역 |

### 3.2 ProfileForm

**프로필 편집 폼**

### 3.3 PasswordChangeForm

**비밀번호 변경 폼**

### 3.4 NotificationToggles

**알림 설정 토글 목록**

### 3.5 SubscriptionCards

**요금제 카드**

### 3.6 DangerZone

**계정 삭제/비활성화**

---

## 4. 데이터 요구사항

### Server Actions

| Action | 설명 |
|--------|------|
| `getProfileSettings` | 프로필 설정 조회 |
| `updateProfile` | 프로필 정보 업데이트 |
| `changePassword` | 비밀번호 변경 |
| `updateNotificationSettings` | 알림 설정 업데이트 |
| `getSubscription` | 구독 정보 조회 |
| `deactivateAccount` | 계정 비활성화 |
| `deleteAccount` | 계정 삭제 |

---

## 5. 인터랙션 정의

### 5.1 슬러그 변경

1. **Given** 프로가 슬러그를 변경하려 할 때
2. **When** 새 슬러그를 입력하고 확인을 클릭하면
3. **Then** 실시간으로 중복 여부를 확인하고 결과를 표시
4. **Then** 저장 시 URL이 변경됨을 경고

### 5.2 계정 삭제

1. **Given** 프로가 계정 삭제를 시도할 때
2. **When** 계정 삭제 버튼을 클릭하면
3. **Then** 확인 모달 + 비밀번호 입력 요청
4. **When** 확인하면
5. **Then** 모든 데이터 삭제, 로그아웃, 홈으로 리디렉션

---

## 6. 접근성 요구사항

- [ ] 탭: role="tablist", aria-selected
- [ ] 토글: role="switch", aria-checked
- [ ] 위험 영역: 시각적 경고 (빨간색 테두리)
- [ ] 삭제 확인 모달: aria-describedby로 경고 연결

---

## 7. 에러 케이스

| 에러 유형 | 처리 |
|----------|------|
| 슬러그 중복 | "이미 사용 중인 슬러그입니다" |
| 비밀번호 불일치 | "현재 비밀번호가 올바르지 않습니다" |
| 이미지 업로드 실패 | Toast 에러 |
| 저장 실패 | Toast 에러 + 재시도 |

---

## 8. 관련 화면

- **이전 화면**: [Dashboard Home](./dashboard-home.md)
- **연관 화면**: [Pricing](../01-marketing/pricing.md) (업그레이드)

---

## 9. 구현 메모

### TODO

- [ ] SettingsTabs 컴포넌트 구현
- [ ] ProfileForm 컴포넌트 구현
- [ ] PasswordChangeForm 컴포넌트 구현
- [ ] NotificationToggles 컴포넌트 구현
- [ ] SubscriptionCards 컴포넌트 구현
- [ ] DangerZone 컴포넌트 구현
- [ ] `/dashboard/settings/page.tsx` 페이지 구현
- [ ] 이미지 업로드 Supabase Storage 연동
- [ ] Stripe/Toss 결제 연동 (구독)
