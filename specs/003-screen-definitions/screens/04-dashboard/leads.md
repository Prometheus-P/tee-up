# Screen: Leads (리드 관리)

**Route**: `/dashboard/leads`
**Status**: Implemented
**Last Updated**: 2025-12-18
**Priority**: P0
**Dependencies**: Auth, Dashboard Layout

---

## 1. 화면 개요

### 목적
프로가 포트폴리오를 통해 수집된 리드(잠재 고객)를 관리하고 추적한다.

### 사용자 흐름
```
/dashboard → /dashboard/leads → 리드 상세 확인 → 연락
```

### 접근 조건
- **인증 필요**: Yes
- **권한 수준**: pro
- **전제 조건**: 프로 프로필 존재

---

## 2. 레이아웃 구조

### 와이어프레임

```
┌────────────────────────────────────────────────────────────────────────────┐
│ Header                                              [프로필] [로그아웃]    │
├─────────────────┬──────────────────────────────────────────────────────────┤
│                 │                                                          │
│  Sidebar        │  리드 관리                                                │
│  ────────       │                                                          │
│  □ 대시보드     │  ┌───────────┐ ┌───────────┐ ┌───────────┐               │
│  □ 포트폴리오   │  │ 월간 리드 │ │ 전체 리드 │ │ 잔여 리드 │               │
│  ■ 리드         │  │     12    │ │     89    │ │   3/10    │               │
│  □ 컨시어지     │  └───────────┘ └───────────┘ └───────────┘               │
│  □ 설정         │                                                          │
│                 │  ┌──────────────────────────────────────────────────┐   │
│                 │  │ 이름       │ 연락 방법  │ 시간        │ 출처      │   │
│                 │  ├────────────┼────────────┼─────────────┼──────────┤   │
│                 │  │ 김골퍼     │ 📱 카카오  │ 2시간 전    │ /pro-kim │   │
│                 │  │ 이수강생   │ 📞 전화    │ 어제        │ /pro-kim │   │
│                 │  │ 박회원     │ 💬 문의폼  │ 2일 전      │ Instagram│   │
│                 │  │ ...        │            │             │          │   │
│                 │  └──────────────────────────────────────────────────┘   │
│                 │                                                          │
│                 │  데이터가 없을 때:                                        │
│                 │  ┌──────────────────────────────────────────────────┐   │
│                 │  │  📭 아직 리드가 없습니다                          │   │
│                 │  │     포트폴리오를 공유하여 리드를 수집하세요        │   │
│                 │  │     [포트폴리오 편집하기]                         │   │
│                 │  └──────────────────────────────────────────────────┘   │
│                 │                                                          │
└─────────────────┴──────────────────────────────────────────────────────────┘
```

### 반응형 동작

| Breakpoint | 레이아웃 변화 |
|------------|---------------|
| Mobile | 테이블 → 카드 리스트, 스와이프 액션 |
| md+ | 테이블 레이아웃 |

---

## 3. 컴포넌트 목록

### 3.1 LeadStats

**리드 통계 카드**

| Stat | 설명 |
|------|------|
| 월간 리드 | 이번 달 생성된 리드 수 |
| 전체 리드 | 누적 리드 수 |
| 잔여 리드 | 무료 플랜 기준 잔여/전체 (예: 3/10) |

### 3.2 LeadsTable

**리드 목록 테이블**

| Column | 설명 | 정렬 |
|--------|------|------|
| 이름 | 리드 이름 또는 "익명" | - |
| 연락 방법 | 카카오/전화/문의폼 아이콘 + 텍스트 | - |
| 시간 | 상대 시간 (예: "2시간 전") | 기본 내림차순 |
| 출처 | 리드 생성 경로 (slug 또는 외부 링크) | - |

### 3.3 LeadCard (모바일)

**모바일용 카드 레이아웃**

```
┌─────────────────────────────────────┐
│ 김골퍼                    2시간 전   │
│ 📱 카카오톡으로 문의                 │
│ 출처: /pro-kim                      │
└─────────────────────────────────────┘
```

### 3.4 EmptyState

**리드 없음 상태**

```tsx
<EmptyState
  icon={<InboxIcon />}
  title="아직 리드가 없습니다"
  description="포트폴리오를 공유하여 리드를 수집하세요"
  action={<Button href="/dashboard/portfolio">포트폴리오 편집하기</Button>}
/>
```

---

## 4. 데이터 요구사항

### Server Actions

| Action | 설명 |
|--------|------|
| `getLeads` | 리드 목록 조회 (페이지네이션) |
| `getLeadStats` | 리드 통계 조회 |

### 데이터 스키마

```typescript
interface Lead {
  id: string;
  pro_profile_id: string;
  name: string | null;
  contact_method: 'kakao' | 'phone' | 'form';
  contact_value: string | null; // 마스킹된 연락처
  source_url: string;
  created_at: string;
}

interface LeadStats {
  monthlyLeads: number;
  totalLeads: number;
  remainingLeads: number;
  maxLeads: number;
}
```

---

## 5. 접근성 요구사항

- [ ] 테이블: role="table", 헤더에 scope="col"
- [ ] 정렬 가능 컬럼: aria-sort
- [ ] 빈 상태: role="status"
- [ ] 모바일 카드: role="article"

---

## 6. 에러 케이스

| 에러 유형 | 처리 |
|----------|------|
| 데이터 로드 실패 | 에러 메시지 + 재시도 |
| 무료 한도 초과 | 업그레이드 배너 표시 |

---

## 7. 관련 화면

- **이전 화면**: [Dashboard Home](./dashboard-home.md)
- **연관 화면**: [Pro Portfolio](../03-portfolio/pro-portfolio.md) (리드 생성 출처)
